//- æ–‡ç« å®¹å™¨
#article-container
  //- å¦‚æœä¸»é¢˜çš„é“¾æ¥é¡µé¢é¡¶éƒ¨å¯ç”¨ä¸”å¯ç”¨
  if theme.linkPageTop && theme.linkPageTop.enable
    #flink-banners //- å‹æƒ…é“¾æ¥æ¨ªå¹…å®¹å™¨
      .banner-top-box //- é¡¶éƒ¨æ¨ªå¹…ç›’å­
        .flink-banners-title //- å‹æƒ…é“¾æ¥æ ‡é¢˜å®¹å™¨
          .banners-title-small å‹æƒ…é“¾æ¥ //- å°æ ‡é¢˜
          .banners-title-big=theme.linkPageTop ? theme.linkPageTop.title : "ä¸æ•°ç™¾ååšä¸»æ— é™è¿›æ­¥" //- å¤§æ ‡é¢˜ï¼Œè‹¥æœªè®¾ç½®åˆ™ä½¿ç”¨é»˜è®¤æ–‡æœ¬
        .banner-button-group //- æŒ‰é’®ç»„
          //- å¦‚æœä¸»é¢˜é…ç½®ä¸­æœ‰ API URL
          if (theme.friends_vue.apiurl)
            a.banner-button.secondary.no-text-decoration(onclick="friendChainRandomTransmission()") //- åˆ›å»ºéšæœºè®¿é—®æŒ‰é’®
              i.anzhiyufont.anzhiyu-icon-paper-plane1 //- æŒ‰é’®å›¾æ ‡
              span.banner-button-text éšæœºè®¿é—® //- æŒ‰é’®æ–‡æœ¬
          //- å¦‚æœæœ‰æ·»åŠ å¥½å‹é“¾æ¥çš„å ä½ç¬¦ä¸”è¯„è®ºç³»ç»Ÿä½¿ç”¨ Twikoo ä¸”é…ç½®äº† envId
          if theme.linkPageTop.addFriendPlaceholder && theme.comments.use == 'Twikoo' && theme.twikoo.envId
            a.banner-button.no-text-decoration(onclick="anzhiyu.addFriendLink()") //- åˆ›å»ºç”³è¯·å‹é“¾æŒ‰é’®
              i.anzhiyufont.anzhiyu-icon-arrow-circle-right //- æŒ‰é’®å›¾æ ‡
              span.banner-button-text ç”³è¯·å‹é“¾ //- æŒ‰é’®æ–‡æœ¬
      #skills-tags-group-all //- æŠ€èƒ½æ ‡ç­¾ç»„å®¹å™¨
        .tags-group-wrapper //- æ ‡ç­¾ç»„åŒ…è£…å™¨
          //- å®šä¹‰ä¸€ä¸ªè·å–ä¸å¸¦æ„Ÿå¹å·çš„å¤´åƒ URL çš„å‡½æ•°
          - function getAvatarWithoutExclamationMark(url) {
          -   const index = url.indexOf('!');
          -   return index !== -1 ? url.substring(0, index) : url; //- è¿”å›å»æ‰æ„Ÿå¹å·åçš„ URL
          - }
          each y in [1,2] //- éå† 1 å’Œ 2
            each i, index in site.data.link.slice(0, 15) //- éå†é“¾æ¥æ•°æ®çš„å‰ 15 ä¸ªå…ƒç´ 
              - const link_list = i.link_list.slice() //- å¤åˆ¶é“¾æ¥åˆ—è¡¨
              - const hundredSuffix = i.hundredSuffix ? i.hundredSuffix : "" //- å¤„ç†åç¼€
              - const evenNum = link_list.filter((x, index) => index % 2 === 0); //- è·å–å¶æ•°ç´¢å¼•çš„é“¾æ¥
              - const oddNum = link_list.filter((x, index) => index % 2 === 1); //- è·å–å¥‡æ•°ç´¢å¼•çš„é“¾æ¥
              each item, index2 in link_list.slice(0, Math.min(evenNum.length, oddNum.length)) //- éå†é“¾æ¥åˆ—è¡¨
                - const index = index2 * 2 //- è®¡ç®—ç´¢å¼•
                //- ç¡®ä¿ç´¢å¼•åœ¨èŒƒå›´å†…ä¸”å¶æ•°å’Œå¥‡æ•°åˆ—è¡¨ä¸­éƒ½æœ‰å¯¹åº”å…ƒç´ 
                if (index <= 15 && typeof evenNum[index] !== 'undefined' && typeof oddNum[index] !== 'undefined')
                  - let oddNumAvatar = getAvatarWithoutExclamationMark(oddNum[index].avatar); //- è·å–å¥‡æ•°å¤´åƒ URL
                  - let evenNumAvatar = getAvatarWithoutExclamationMark(evenNum[index].avatar); //- è·å–å¶æ•°å¤´åƒ URL
                  .tags-group-icon-pair //- æ ‡ç­¾ç»„å›¾æ ‡å¯¹å®¹å™¨
                    a.tags-group-icon.no-text-decoration(href=url_for(evenNum[index].link), title=evenNum[index].name) //- å¶æ•°é“¾æ¥å›¾æ ‡
                      img.no-lightbox(title=evenNum[index].name, src=url_for(evenNumAvatar + hundredSuffix) onerror=`this.onerror=null;this.src='` + url_for(theme.error_img.flink) + `'` alt=evenNum[index].name) //- å¶æ•°é“¾æ¥çš„å¤´åƒ
                    a.tags-group-icon.no-text-decoration(href=url_for(oddNum[index].link), title=oddNum[index].name) //- å¥‡æ•°é“¾æ¥å›¾æ ‡
                      img.no-lightbox(title=oddNum[index].name, src=url_for(oddNumAvatar + hundredSuffix) onerror=`this.onerror=null;this.src='` + url_for(theme.error_img.flink) + `'` alt=oddNum[index].name) //- å¥‡æ•°é“¾æ¥çš„å¤´åƒ

  .title-h2-a //- åˆ›å»ºæ ‡é¢˜å®¹å™¨
    .title-h2-a-left //- å·¦ä¾§æ ‡é¢˜éƒ¨åˆ†
      h2(style='padding-top:0;margin:.6rem 0 .6rem') ğŸ£ é’“é±¼ //- ä¸»æ ‡é¢˜
      a.random-post-start.no-text-decoration(href='javascript:fetchRandomPost();') //- åˆ›å»ºéšæœºæ–‡ç« æŒ‰é’®
        i.anzhiyufont.anzhiyu-icon-arrow-rotate-right //- æŒ‰é’®å›¾æ ‡
    .title-h2-a-right //- å³ä¾§æ ‡é¢˜éƒ¨åˆ†
      a.random-post-all.no-text-decoration(href='/link/') å…¨éƒ¨å‹é“¾ //- åˆ›å»ºé“¾æ¥ï¼ŒæŒ‡å‘æ‰€æœ‰å‹é“¾çš„é¡µé¢

  #random-post //- éšæœºæ–‡ç« å®¹å™¨
  script(defer data-pjax src=url_for(theme.asset.random_friends_post_js)) //- åŠ è½½éšæœºå‹é“¾æ–‡ç« çš„ JavaScript æ–‡ä»¶
  
  .flink //- å‹æƒ…é“¾æ¥å®¹å™¨
    //- å¦‚æœæœ‰é“¾æ¥æ•°æ®
    if site.data.link
      each i in site.data.link //- éå†é“¾æ¥æ•°æ®
        if i.class_name //- å¦‚æœæœ‰åˆ†ç±»å
          h2!= i.class_name + "(" + i.link_list.length + ")" //- æ˜¾ç¤ºåˆ†ç±»åå’Œé“¾æ¥æ•°é‡
        if i.class_desc //- å¦‚æœæœ‰åˆ†ç±»æè¿°
          .flink-desc!=i.class_desc //- æ˜¾ç¤ºåˆ†ç±»æè¿°
        //- å¦‚æœé“¾æ¥æ ·å¼ä¸º 'anzhiyu'
        if i.flink_style === 'anzhiyu'
          div(class=i.lost_contact ? 'anzhiyu-flink-list cf-friends-lost-contact' : 'anzhiyu-flink-list') //- åˆ›å»ºå‹é“¾åˆ—è¡¨å®¹å™¨
            if i.link_list //- å¦‚æœæœ‰é“¾æ¥åˆ—è¡¨
              each item in i.link_list //- éå†é“¾æ¥åˆ—è¡¨
                - let color = item.color || "" //- è·å–é¢œè‰²
                - let tag = item.tag || "" //- è·å–æ ‡ç­¾
                
                .flink-list-item //- å‹æƒ…é“¾æ¥åˆ—è¡¨é¡¹
                  //- æ ¹æ®é¢œè‰²å’Œæ ‡ç­¾æ¡ä»¶æ˜¾ç¤ºä¸åŒçš„æ ‡ç­¾
                  if color == "vip" && tag
                    span.site-card-tag.vip #[=tag] //- VIP æ ‡ç­¾
                      i.light
                  else if color == "speed" && tag
                    span.site-card-tag.speed #[=tag] //- Speed æ ‡ç­¾
                  else if tag
                    span.site-card-tag(style=`background-color: ${color}`) #[=tag] //- è‡ªå®šä¹‰é¢œè‰²æ ‡ç­¾
                  else if item.recommend
                    span.site-card-tag è //- æ¨èæ ‡ç­¾
                  //- åˆ¤æ–­é“¾æ¥æ˜¯å¦ä¸ºå¤±è”çŠ¶æ€
                  if i.lost_contact
                    a.cf-friends-link(href=url_for(item.link) title=item.name target="_blank") //- å¤±è”é“¾æ¥
                      if theme.lazyload.enable
                        img.no-lightbox(data-lazy-src=url_for(item.avatar) onerror=`this.onerror=null;this.src='` + url_for(theme.error_img.flink) + `'` alt=item.name ) //- åŠ è½½å¤´åƒ
                      else
                        img.cf-friends-avatar.no-lightbox(src=url_for(item.avatar) onerror=`this.onerror=null;this.src='` + url_for(theme.error_img.flink) + `'` alt=item.name ) //- åŠ è½½å¤´åƒ
                      .flink-item-info //- å‹é“¾ä¿¡æ¯å®¹å™¨
                        .flink-item-name.cf-friends-name-lost-contact= item.name //- æ˜¾ç¤ºå‹é“¾åç§°
                  else
                    a.cf-friends-link(href=url_for(item.link) cf-href=url_for(item.link) title=item.name target="_blank") //- æ­£å¸¸é“¾æ¥
                      if theme.lazyload.enable
                        img.cf-friends-avatar.no-lightbox(data-lazy-src=url_for(item.avatar), cf-src=url_for(item.avatar), onerror=`this.onerror=null;this.src='` + url_for(theme.error_img.flink) + `'` alt=item.name ) //- åŠ è½½å¤´åƒ
                      else
                        img.cf-friends-avatar.no-lightbox(src=url_for(item.avatar) cf-src=url_for(item.avatar) onerror=`this.onerror=null;this.src='` + url_for(theme.error_img.flink) + `'` alt=item.name ) //- åŠ è½½å¤´åƒ
                      .flink-item-info //- å‹é“¾ä¿¡æ¯å®¹å™¨
                        .flink-item-name.cf-friends-name= item.name //- æ˜¾ç¤ºå‹é“¾åç§°
                        .flink-item-desc(title=item.descr)= item.descr //- æ˜¾ç¤ºå‹é“¾æè¿°
        
        //- å¦‚æœé“¾æ¥æ ·å¼ä¸º 'telescopic'
        else if i.flink_style === 'telescopic'
          .telescopic-site-card-group //- ä¼¸ç¼©å¼é“¾æ¥å¡ç‰‡ç»„
            each item in i.link_list //- éå†é“¾æ¥åˆ—è¡¨
              - let color = item.color || "" //- è·å–é¢œè‰²
              - let tag = item.tag || "" //- è·å–æ ‡ç­¾
              - let siteshot = item.siteshot || `https://image.thum.io/get/width/400/crop/800/allowJPG/wait/20/noanimate/${item.link}` || theme.default_img //- è·å–ç½‘ç«™ç¼©ç•¥å›¾
              .site-card //- ç½‘ç«™å¡ç‰‡
                //- æ ¹æ®é¢œè‰²å’Œæ ‡ç­¾æ¡ä»¶æ˜¾ç¤ºä¸åŒçš„æ ‡ç­¾
                if color == "vip" && tag
                  span.site-card-tag.vip #[=tag] //- VIP æ ‡ç­¾
                    i.light
                else if color == "speed" && tag
                  span.site-card-tag.speed #[=tag] //- Speed æ ‡ç­¾
                else if tag
                  span.site-card-tag(style=`background-color: ${color}`) #[=tag] //- è‡ªå®šä¹‰é¢œè‰²æ ‡ç­¾
                else if item.recommend
                  span.site-card-tag è //- æ¨èæ ‡ç­¾
                a.img.no-text-decoration(target='_blank', title=`${item.name}`, href=`${item.link}`, rel='external nofollow') //- é“¾æ¥
                  img.flink-avatar(data-lazy-src=siteshot, onerror=`this.onerror=null;this.src='${theme.default_img}'`, alt=item.name, style="pointer-events: none;", src=`${siteshot}`) //- æ˜¾ç¤ºç½‘ç«™ç¼©ç•¥å›¾
                a.info.cf-friends-link.no-text-decoration(target='_blank', title=`${item.name}`, href=`${item.link}`, cf-href=url_for(item.link), rel='external nofollow') //- é“¾æ¥
                  .site-card-avatar //- ç½‘ç«™å¡ç‰‡å¤´åƒå®¹å™¨
                    img.flink-avatar.cf-friends-avatar.no-fancybox(data-lazy-src=item.avatar, cf-src=url_for(item.avatar), onerror=`this.onerror=null;this.src='${theme.default_img}'`, alt=item.name, src=item.avatar) //- æ˜¾ç¤ºå‹é“¾å¤´åƒ
                  .site-card-text //- ç½‘ç«™å¡ç‰‡æ–‡æœ¬å®¹å™¨
                    span.title.cf-friends-name #[=item.name] //- æ˜¾ç¤ºå‹é“¾åç§°
                    span.desc(title=`${item.descr}`) #[=item.descr] //- æ˜¾ç¤ºå‹é“¾æè¿°
        //- å¦‚æœé“¾æ¥æ ·å¼ä¸º 'flexcard'
        else if i.flink_style === 'flexcard'
          .flexcard-flink-list //- å¼¹æ€§å¡ç‰‡å‹é“¾åˆ—è¡¨
            each item in i.link_list //- éå†é“¾æ¥åˆ—è¡¨
              a.flink-list-card.cf-friends-link(href=url_for(item.link) cf-href=url_for(item.link) target='_blank' data-title=item.descr) //- é“¾æ¥å¡ç‰‡
                .wrapper.cover //- åŒ…è£…å™¨
                  - var siteshot = item.siteshot ? url_for(item.siteshot) : 'https://image.thum.io/get/width/400/crop/800/allowJPG/wait/20/noanimate/' + item.link //- è·å–ç½‘ç«™ç¼©ç•¥å›¾
                  if theme.lazyload.enable
                    img.cover.fadeIn(data-lazy-src=siteshot onerror=`this.onerror=null;this.src='` + url_for(theme.error_img.post_page) + `'` alt='cover' ) //- åŠ è½½ç¼©ç•¥å›¾
                  else
                    img.cover.fadeIn(src=siteshot onerror=`this.onerror=null;this.src='` + url_for(theme.error_img.post_page) + `'` alt='cover' ) //- åŠ è½½ç¼©ç•¥å›¾    
                .info //- ä¿¡æ¯å®¹å™¨
                  if theme.lazyload.enable
                    img.cf-friends-avatar.no-lightbox.flink-avatar(data-lazy-src=url_for(item.avatar) cf-src=url_for(item.avatar) onerror=`this.onerror=null;this.src='` + url_for(theme.error_img.flink) + `'` alt='cover' ) //- åŠ è½½å¤´åƒ
                  else
                    img.cf-friends-avatar.no-lightbox(src=url_for(item.avatar) cf-src=url_for(item.avatar) onerror=`this.onerror=null;this.src='` + url_for(theme.error_img.flink) + `'` alt='cover' ) //- åŠ è½½å¤´åƒ
                  span.flink-sitename.cf-friends-name= item.name //- æ˜¾ç¤ºå‹é“¾åç§°
    != page.content //- æ˜¾ç¤ºé¡µé¢å†…å®¹
